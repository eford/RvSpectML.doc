<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Internals · RvSpectML.jl</title><link rel="canonical" href="https://eford.github.io/RvSpectML.jl/internals.html"/><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>RvSpectML.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><span class="toctext">API</span><ul><li><a class="toctext" href="contents.html">Overview</a></li><li><a class="toctext" href="modules.html">Modules</a></li><li><a class="toctext" href="functions.html">Functions</a></li><li><a class="toctext" href="types.html">Types</a></li></ul></li><li class="current"><a class="toctext" href="internals.html">Internals</a><ul class="internal"><li><a class="toctext" href="#Functions-1">Functions</a></li><li><a class="toctext" href="#Other-1">Other</a></li><li><a class="toctext" href="#Types-1">Types</a></li><li><a class="toctext" href="#Other-2">Other</a></li></ul></li><li><a class="toctext" href="longlist.html">Index</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="internals.html">Internals</a></li></ul><a class="edit-page" href="https://github.com/eford/RvSpectML.jl/blob/master/docs/src/internals.md#L"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Internals</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="RvSpectML-Internals-1" href="#RvSpectML-Internals-1">RvSpectML Internals</a></h1><p>As a heads up, these functions and types are more likely to change going forward than functions and types that are exported.  </p><ul><li><a href="internals.html#RvSpectML-Internals-1">RvSpectML Internals</a></li><ul><li><a href="internals.html#Functions-1">Functions</a></li><ul><li><a href="internals.html#General-purpose-1">General purpose</a></li><li><a href="internals.html#Radial-Velocity-Related-1">Radial Velocity Related</a></li><li><a href="internals.html#Interpolation-1">Interpolation</a></li></ul><li><a href="internals.html#Other-1">Other</a></li><li><a href="internals.html#Types-1">Types</a></li><ul><li><a href="internals.html#General-purpose-2">General purpose</a></li><li><a href="internals.html#Radial-Velocity-Related-2">Radial Velocity Related</a></li><li><a href="internals.html#Interpolation-2">Interpolation</a></li></ul><li><a href="internals.html#Other-2">Other</a></li></ul></ul><h2><a class="nav-anchor" id="Functions-1" href="#Functions-1">Functions</a></h2><h3><a class="nav-anchor" id="General-purpose-1" href="#General-purpose-1">General purpose</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.bin_times-Union{Tuple{AT}, Tuple{T}, Tuple{RvSpectMLBase.AbstractSpectralTimeSeriesCommonWavelengths,AT,Integer}} where AT&lt;:AbstractArray{T,1} where T&lt;:Real" href="#RvSpectML.bin_times-Union{Tuple{AT}, Tuple{T}, Tuple{RvSpectMLBase.AbstractSpectralTimeSeriesCommonWavelengths,AT,Integer}} where AT&lt;:AbstractArray{T,1} where T&lt;:Real"><code>RvSpectML.bin_times</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>bin<em>times() Bins times from a SpectralTimeSeriesCommonWavelengths object using the groupings from time</em>idx in the metadata.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_chunk_rvs_from_taylor_expansion-Union{Tuple{STS}, Tuple{RT}, Tuple{DT}, Tuple{T2}, Tuple{MT}, Tuple{T1}, Tuple{STS}} where RT&lt;:AbstractUnitRange where DT&lt;:AbstractArray{T2,1} where T2&lt;:Real where MT&lt;:AbstractArray{T1,1} where T1&lt;:Real where STS&lt;:RvSpectMLBase.AbstractSpectralTimeSeriesCommonWavelengths" href="#RvSpectML.calc_chunk_rvs_from_taylor_expansion-Union{Tuple{STS}, Tuple{RT}, Tuple{DT}, Tuple{T2}, Tuple{MT}, Tuple{T1}, Tuple{STS}} where RT&lt;:AbstractUnitRange where DT&lt;:AbstractArray{T2,1} where T2&lt;:Real where MT&lt;:AbstractArray{T1,1} where T1&lt;:Real where STS&lt;:RvSpectMLBase.AbstractSpectralTimeSeriesCommonWavelengths"><code>RvSpectML.calc_chunk_rvs_from_taylor_expansion</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p><code>calc_chunk_rvs_from_taylor_expansion( spectra )</code> Inputs:</p><ul><li>spectra: SpectralTimeSeriesCommonWavelengths</li></ul><p>Optional Arguments:</p><ul><li>mean: mean spectrum</li><li>deriv: dmeanflux/dlnλ</li><li>equal_weight:  For now, spectra are equal weighted. (true)</li></ul><p>Output named pair:</p><ul><li>rv: Vector of vector of estimated radial velocities for each chunk</li><li>σ_rv: Vector of vector of uncertainties in rv estimates for each chunk</li></ul></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_d2fluxdlnlambda2!-Union{Tuple{T3}, Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,1},AbstractArray{T1,1},AbstractArray{T2,1}}} where T3&lt;:Real where T2&lt;:Real where T1&lt;:Real" href="#RvSpectML.calc_d2fluxdlnlambda2!-Union{Tuple{T3}, Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,1},AbstractArray{T1,1},AbstractArray{T2,1}}} where T3&lt;:Real where T2&lt;:Real where T1&lt;:Real"><code>RvSpectML.calc_d2fluxdlnlambda2!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Estimate numerical second derivative of fluxes given wavelengths. </p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_d2fluxdlnlambda2-Union{Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,1},AbstractArray{T2,1}}} where T2&lt;:Real where T1&lt;:Real" href="#RvSpectML.calc_d2fluxdlnlambda2-Union{Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,1},AbstractArray{T2,1}}} where T2&lt;:Real where T1&lt;:Real"><code>RvSpectML.calc_d2fluxdlnlambda2</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Estimate numerical second derivative of fluxes given wavelengths. </p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_dfluxdlnlambda!-Union{Tuple{T3}, Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,1},AbstractArray{T2,1},AbstractArray{T3,1}}} where T3&lt;:Real where T2&lt;:Real where T1&lt;:Real" href="#RvSpectML.calc_dfluxdlnlambda!-Union{Tuple{T3}, Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,1},AbstractArray{T2,1},AbstractArray{T3,1}}} where T3&lt;:Real where T2&lt;:Real where T1&lt;:Real"><code>RvSpectML.calc_dfluxdlnlambda!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Estimate numerical derivative of fluxes given wavelengths. </p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_dfluxdlnlambda-Union{Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,1},AbstractArray{T2,1}}} where T2&lt;:Real where T1&lt;:Real" href="#RvSpectML.calc_dfluxdlnlambda-Union{Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,1},AbstractArray{T2,1}}} where T2&lt;:Real where T1&lt;:Real"><code>RvSpectML.calc_dfluxdlnlambda</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Estimate numerical derivative of fluxes given wavelengths. </p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_mean_d2fluxdlnlambda2-Union{Tuple{URT}, Tuple{T3}, Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,2},AbstractArray{T1,2},AbstractArray{T3,1},AbstractArray{URT,1}}} where URT&lt;:AbstractUnitRange where T3&lt;:Real where T2&lt;:Real where T1&lt;:Real" href="#RvSpectML.calc_mean_d2fluxdlnlambda2-Union{Tuple{URT}, Tuple{T3}, Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,2},AbstractArray{T1,2},AbstractArray{T3,1},AbstractArray{URT,1}}} where URT&lt;:AbstractUnitRange where T3&lt;:Real where T2&lt;:Real where T1&lt;:Real"><code>RvSpectML.calc_mean_d2fluxdlnlambda2</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Return mean numerical derivative (d²flux/dlnλ²) based on a common set of wavelengths. Inputs:</p><ul><li>flux (2d)</li><li>var (2d)</li><li>λ (1d)</li><li>chunk_map: Array of ranges specifying how each chunk maps into indexes of output derivative</li></ul><p>Output:</p><ul><li>d²flux/dlnλ²: (1d)</li></ul><pre><code class="language-none"></code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_mean_dfluxdlnlambda-Union{Tuple{URT}, Tuple{T3}, Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,2},AbstractArray{T1,2},AbstractArray{T3,1},AbstractArray{URT,1}}} where URT&lt;:AbstractUnitRange where T3&lt;:Real where T2&lt;:Real where T1&lt;:Real" href="#RvSpectML.calc_mean_dfluxdlnlambda-Union{Tuple{URT}, Tuple{T3}, Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,2},AbstractArray{T1,2},AbstractArray{T3,1},AbstractArray{URT,1}}} where URT&lt;:AbstractUnitRange where T3&lt;:Real where T2&lt;:Real where T1&lt;:Real"><code>RvSpectML.calc_mean_dfluxdlnlambda</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Return mean numerical derivative (dflux/dlnλ) based on a common set of wavelengths. Inputs:</p><ul><li>flux (2d)</li><li>var (2d)</li><li>λ (1d)</li><li>chunk_map: Array of ranges specifying how each chunk maps into indexes of output derivative</li></ul><p>Output:</p><ul><li>dflux/dlnλ: (1d)</li></ul><pre><code class="language-none"></code></pre></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_mean_spectrum-Union{Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,2},AbstractArray{T2,2}}} where T2&lt;:Real where T1&lt;:Real" href="#RvSpectML.calc_mean_spectrum-Union{Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,2},AbstractArray{T2,2}}} where T2&lt;:Real where T1&lt;:Real"><code>RvSpectML.calc_mean_spectrum</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Return mean flux (averaging over observations at different times, variance weighted) based on a common set of wavelengths.    Inputs: flux &amp; var (2d: pixel, time)</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_rvs_from_taylor_expansion-Union{Tuple{STS}, Tuple{RT}, Tuple{DT}, Tuple{T2}, Tuple{MT}, Tuple{T1}, Tuple{STS}} where RT&lt;:AbstractUnitRange where DT&lt;:AbstractArray{T2,1} where T2&lt;:Real where MT&lt;:AbstractArray{T1,1} where T1&lt;:Real where STS&lt;:RvSpectMLBase.AbstractSpectralTimeSeriesCommonWavelengths" href="#RvSpectML.calc_rvs_from_taylor_expansion-Union{Tuple{STS}, Tuple{RT}, Tuple{DT}, Tuple{T2}, Tuple{MT}, Tuple{T1}, Tuple{STS}} where RT&lt;:AbstractUnitRange where DT&lt;:AbstractArray{T2,1} where T2&lt;:Real where MT&lt;:AbstractArray{T1,1} where T1&lt;:Real where STS&lt;:RvSpectMLBase.AbstractSpectralTimeSeriesCommonWavelengths"><code>RvSpectML.calc_rvs_from_taylor_expansion</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p><code>calc_rvs_from_taylor_expansion( spectra )</code> Inputs:</p><ul><li>spectra: SpectralTimeSeriesCommonWavelengths</li></ul><p>Optional Arguments:</p><ul><li>mean: mean spectrum</li><li>deriv: dmeanflux/dlnλ</li><li>idx: range of pixel indcies to use for calculation</li><li>equal_weight:  For now, spectra are equal weighted. (true)</li></ul><p>Output named pair:</p><ul><li>rv: Vector of estimated radial velocities</li><li>σ_rv: Vector of uncertainties in rv estimates</li></ul></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_rvs_from_taylor_expansion_alt-Union{Tuple{STS}, Tuple{RT}, Tuple{DT}, Tuple{T2}, Tuple{MT}, Tuple{T1}, Tuple{STS}} where RT&lt;:AbstractUnitRange where DT&lt;:AbstractArray{T2,1} where T2&lt;:Real where MT&lt;:AbstractArray{T1,1} where T1&lt;:Real where STS&lt;:RvSpectMLBase.AbstractSpectralTimeSeriesCommonWavelengths" href="#RvSpectML.calc_rvs_from_taylor_expansion_alt-Union{Tuple{STS}, Tuple{RT}, Tuple{DT}, Tuple{T2}, Tuple{MT}, Tuple{T1}, Tuple{STS}} where RT&lt;:AbstractUnitRange where DT&lt;:AbstractArray{T2,1} where T2&lt;:Real where MT&lt;:AbstractArray{T1,1} where T1&lt;:Real where STS&lt;:RvSpectMLBase.AbstractSpectralTimeSeriesCommonWavelengths"><code>RvSpectML.calc_rvs_from_taylor_expansion_alt</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p><code>calc_rvs_from_taylor_expansion_alt( spectra )</code> Experimental version of <a href="@ref">calc<em>rvs</em>from<em>taylor</em>expansion</a>.</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.repack_flux_vector_to_chunk_matrix-Union{Tuple{CMT}, Tuple{AA4}, Tuple{T4}, Tuple{AA3}, Tuple{T3}, Tuple{AA2}, Tuple{T2}, Tuple{AA1}, Tuple{T1}, Tuple{AA1,AA2,AA3,CMT,AA4}} where CMT&lt;:(AbstractArray{UnitRange{Int64},N} where N) where AA4&lt;:AbstractArray{T4,1} where T4&lt;:Real where AA3&lt;:AbstractArray{T3,1} where T3&lt;:Real where AA2&lt;:AbstractArray{T2,1} where T2&lt;:Real where AA1&lt;:AbstractArray{T1,1} where T1&lt;:Real" href="#RvSpectML.repack_flux_vector_to_chunk_matrix-Union{Tuple{CMT}, Tuple{AA4}, Tuple{T4}, Tuple{AA3}, Tuple{T3}, Tuple{AA2}, Tuple{T2}, Tuple{AA1}, Tuple{T1}, Tuple{AA1,AA2,AA3,CMT,AA4}} where CMT&lt;:(AbstractArray{UnitRange{Int64},N} where N) where AA4&lt;:AbstractArray{T4,1} where T4&lt;:Real where AA3&lt;:AbstractArray{T3,1} where T3&lt;:Real where AA2&lt;:AbstractArray{T2,1} where T2&lt;:Real where AA1&lt;:AbstractArray{T1,1} where T1&lt;:Real"><code>RvSpectML.repack_flux_vector_to_chunk_matrix</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>repack<em>flux</em>vector<em>to</em>chunk<em>matrix(λ, flux, var, chunk</em>map, λc; alg ) Warning:  This doesn&#39;t work yet</p></div></div></section><h3><a class="nav-anchor" id="Radial-Velocity-Related-1" href="#Radial-Velocity-Related-1">Radial Velocity Related</a></h3><pre><code class="language-">Modules = [RvSpectML.DCPCA, RvSpectML.LineFinder ] #, RvSpectML.PPCA ]
Public = false
Order = [ :function ]</code></pre><h3><a class="nav-anchor" id="Interpolation-1" href="#Interpolation-1">Interpolation</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.SincInterpolation.create_filter_curve_orig-Tuple{Int64}" href="#RvSpectML.SincInterpolation.create_filter_curve_orig-Tuple{Int64}"><code>RvSpectML.SincInterpolation.create_filter_curve_orig</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Original author: Joe Ninan Converted to Julia and optimized by Christian Gilbertson &amp; Eric Ford Returns a cubit interpolator for windowed sinc Filter curve. no<em>of</em>points: number of intepolation points to use in cubic inteprolator</p></div></div></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.TemporalGPInterpolation.predict_gp_mean_var-Union{Tuple{AA3}, Tuple{T3}, Tuple{AGP}, Tuple{AGP,AA3}, Tuple{AGP,AA3,Bool}, Tuple{AGP,AA3,Bool,Bool}} where AA3&lt;:AbstractArray{T3,1} where T3&lt;:Real where AGP&lt;:Stheno.AbstractGP" href="#RvSpectML.TemporalGPInterpolation.predict_gp_mean_var-Union{Tuple{AA3}, Tuple{T3}, Tuple{AGP}, Tuple{AGP,AA3}, Tuple{AGP,AA3,Bool}, Tuple{AGP,AA3,Bool,Bool}} where AA3&lt;:AbstractArray{T3,1} where T3&lt;:Real where AGP&lt;:Stheno.AbstractGP"><code>RvSpectML.TemporalGPInterpolation.predict_gp_mean_var</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>predict<em>gp</em>mean<em>var(gp, xpred ; use</em>logx, use_logy) Inputs:</p><ul><li>gp:</li><li>xpred: Locations to predict GP at</li></ul><p>Optional inputs:</p><ul><li>use_logx: If true, apply log transform to xpred before evaluating GP</li><li>use_logy: If true, apply exp transform after evaluating GP</li></ul><p>Returns tuple with vector of means and variance of GP posterior at locations in xpred.</p></div></div></section><h2><a class="nav-anchor" id="Other-1" href="#Other-1">Other</a></h2><h2><a class="nav-anchor" id="Types-1" href="#Types-1">Types</a></h2><h3><a class="nav-anchor" id="General-purpose-2" href="#General-purpose-2">General purpose</a></h3><h3><a class="nav-anchor" id="Radial-Velocity-Related-2" href="#Radial-Velocity-Related-2">Radial Velocity Related</a></h3><pre><code class="language-">Modules = [ RvSpectML.DCPCA, RvSpectML.LineFinder ] #, RvSpectML.PPCA ]
Public = false
Order = [:type ]</code></pre><h3><a class="nav-anchor" id="Interpolation-2" href="#Interpolation-2">Interpolation</a></h3><h2><a class="nav-anchor" id="Other-2" href="#Other-2">Other</a></h2><footer><hr/><a class="previous" href="types.html"><span class="direction">Previous</span><span class="title">Types</span></a><a class="next" href="longlist.html"><span class="direction">Next</span><span class="title">Index</span></a></footer></article></body></html>
