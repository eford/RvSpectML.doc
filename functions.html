<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Functions · RvSpectML.jl</title><link rel="canonical" href="https://eford.github.io/RvSpectML.jl/functions.html"/><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>RvSpectML.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><span class="toctext">API</span><ul><li><a class="toctext" href="contents.html">Overview</a></li><li><a class="toctext" href="modules.html">Modules</a></li><li class="current"><a class="toctext" href="functions.html">Functions</a><ul class="internal"><li><a class="toctext" href="#General-purpose-1">General purpose</a></li><li><a class="toctext" href="#RV-Related-Algorithms-1">RV-Related Algorithms</a></li><li><a class="toctext" href="#Interpolation-Algorithms-1">Interpolation Algorithms</a></li><li><a class="toctext" href="#Instrument-specific-1">Instrument-specific</a></li><li><a class="toctext" href="#Other-1">Other</a></li></ul></li><li><a class="toctext" href="types.html">Types</a></li></ul></li><li><a class="toctext" href="internals.html">Internals</a></li><li><a class="toctext" href="longlist.html">Index</a></li></ul></nav><article id="docs"><header><nav><ul><li>API</li><li><a href="functions.html">Functions</a></li></ul><a class="edit-page" href="https://github.com/eford/RvSpectML.jl/blob/master/docs/src/functions.md#L"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Functions</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Functions-Exported-by-RvSpectML-1" href="#Functions-Exported-by-RvSpectML-1">Functions Exported by RvSpectML</a></h1><ul><li><a href="functions.html#Functions-Exported-by-RvSpectML-1">Functions Exported by RvSpectML</a></li><ul><li><a href="functions.html#General-purpose-1">General purpose</a></li><li><a href="functions.html#RV-Related-Algorithms-1">RV-Related Algorithms</a></li><li><a href="functions.html#Interpolation-Algorithms-1">Interpolation Algorithms</a></li><li><a href="functions.html#Instrument-specific-1">Instrument-specific</a></li><li><a href="functions.html#Other-1">Other</a></li></ul></ul><h2><a class="nav-anchor" id="General-purpose-1" href="#General-purpose-1">General purpose</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.length-Union{Tuple{ACLT}, Tuple{ACLT}} where ACLT&lt;:AbstractChunkListTimeseries" href="#Base.length-Union{Tuple{ACLT}, Tuple{ACLT}} where ACLT&lt;:AbstractChunkListTimeseries"><code>Base.length</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Return number of ChunkLists in a ChunkListTimeseries </p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/types/chunks.jl#LL114">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.length-Union{Tuple{CLT}, Tuple{CLT}} where CLT&lt;:AbstractChunkList" href="#Base.length-Union{Tuple{CLT}, Tuple{CLT}} where CLT&lt;:AbstractChunkList"><code>Base.length</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Return number of chunks in ChunkList </p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/types/chunks.jl#LL111">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.absorption_line-Union{Tuple{T}, Tuple{T}} where T&lt;:Real" href="#RvSpectML.absorption_line-Union{Tuple{T}, Tuple{T}} where T&lt;:Real"><code>RvSpectML.absorption_line</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>absorption_line(x; mid, width, depth)</p><p>Return a Gaussian absorption line profile evaluated at x.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/util/util.jl#LL22-L26">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.apply_doppler_boost!" href="#RvSpectML.apply_doppler_boost!"><code>RvSpectML.apply_doppler_boost!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">apply_doppler_boost!(spectrum, doppler_factor) -&gt; typeof(spectrum)
apply_doppler_boost!(spectra, df) -&gt; typeof(spectra)</code></pre><p>Apply Doppler boost to spectra&#39;s λ&#39;s and update its metadata[:doppler_factor], so it will know how to undo the transform.</p><p><strong>Arguments:</strong></p><ul><li><code>spectrum::AbstractSpectra</code>: spectrum to be boosted</li><li><code>doppler_factor::Real</code>: boost factor (1 = noop)</li></ul><p>or</p><ul><li><code>spectra::AbstractArray{&lt;:AbstractSpectra}</code>: spectra to be boosted</li><li><code>df::DataFrame</code>: provides <code>:drift</code> and <code>:ssb_rv</code> (in m/s) for calculating the Doppler boost for each spectrum</li></ul><p>TODO: Improve documentation formatting.  This can serve as a template.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/util/spectra.jl#LL9-L22">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.bin_spectra_consecutive-Tuple{AbstractSpectralTimeSeriesCommonWavelengths,Integer}" href="#RvSpectML.bin_spectra_consecutive-Tuple{AbstractSpectralTimeSeriesCommonWavelengths,Integer}"><code>RvSpectML.bin_spectra_consecutive</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>bin<em>spectra</em>consecutive Bins consecutive spectra from a SpectralTimeSeriesCommonWavelengths object</p><p>WARNING:  Simply takes consecutive spectra, so some bins may be from spectra that weren&#39;t taken close together. TODO:  Create version that pays attention to timestamps.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/combine_obs.jl#LL181-L187">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.bin_spectra_max_Δt-Union{Tuple{AT}, Tuple{T}, Tuple{AbstractSpectralTimeSeriesCommonWavelengths,AT,Real}} where AT&lt;:AbstractArray{T,1} where T&lt;:Real" href="#RvSpectML.bin_spectra_max_Δt-Union{Tuple{AT}, Tuple{T}, Tuple{AbstractSpectralTimeSeriesCommonWavelengths,AT,Real}} where AT&lt;:AbstractArray{T,1} where T&lt;:Real"><code>RvSpectML.bin_spectra_max_Δt</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>bin<em>spectra</em>max_Δt Bins spectra from a SpectralTimeSeriesCommonWavelengths object with a maximum spacing between observation times</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/combine_obs.jl#LL151-L154">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.bin_spectra_nightly-Union{Tuple{AT}, Tuple{T}, Tuple{AbstractSpectralTimeSeriesCommonWavelengths,AT}} where AT&lt;:AbstractArray{T,1} where T&lt;:Real" href="#RvSpectML.bin_spectra_nightly-Union{Tuple{AT}, Tuple{T}, Tuple{AbstractSpectralTimeSeriesCommonWavelengths,AT}} where AT&lt;:AbstractArray{T,1} where T&lt;:Real"><code>RvSpectML.bin_spectra_nightly</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>bin<em>spectra</em>nightly Bins spectra from a SpectralTimeSeriesCommonWavelengths object with a maximum spacing between observation times</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/combine_obs.jl#LL78-L81">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.bin_times_consecutive-Union{Tuple{AT}, Tuple{T}, Tuple{AT,Integer}} where AT&lt;:AbstractArray{T,1} where T&lt;:Real" href="#RvSpectML.bin_times_consecutive-Union{Tuple{AT}, Tuple{T}, Tuple{AT,Integer}} where AT&lt;:AbstractArray{T,1} where T&lt;:Real"><code>RvSpectML.bin_times_consecutive</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>bin<em>times</em>consecutive( times, n ) Computes mean times from conseuctive bins of n times (to go with bin<em>consecutive</em>spectra). Returns floor(length(times)/n) elements.</p><p>WARNING:  Simply takes consecutive times, so some bins may be from spectra that weren&#39;t taken close together. TODO:  Create version that pays attention to timestamps.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/combine_obs.jl#LL53-L60">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_d2fluxdlnlambda2-Union{Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,1},AbstractArray{T2,1}}} where T2&lt;:Real where T1&lt;:Real" href="#RvSpectML.calc_d2fluxdlnlambda2-Union{Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,1},AbstractArray{T2,1}}} where T2&lt;:Real where T1&lt;:Real"><code>RvSpectML.calc_d2fluxdlnlambda2</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Estimate numerical second derivative of fluxes given wavelengths. </p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/calc_rv/project_flux.jl#LL38">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_dfluxdlnlambda-Union{Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,1},AbstractArray{T2,1}}} where T2&lt;:Real where T1&lt;:Real" href="#RvSpectML.calc_dfluxdlnlambda-Union{Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,1},AbstractArray{T2,1}}} where T2&lt;:Real where T1&lt;:Real"><code>RvSpectML.calc_dfluxdlnlambda</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Estimate numerical derivative of fluxes given wavelengths. </p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/calc_rv/project_flux.jl#LL14">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_doppler_factor" href="#RvSpectML.calc_doppler_factor"><code>RvSpectML.calc_doppler_factor</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>calc<em>doppler</em>factor(rv; v_perp)</p><p>Return the Doppler boost factor (non-relativistic) for rv in km/s.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/util/util.jl#LL11-L15">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_mean_dfluxdlnlambda-Union{Tuple{URT}, Tuple{T3}, Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,2},AbstractArray{T1,2},AbstractArray{T3,1},AbstractArray{URT,1}}} where URT&lt;:AbstractUnitRange where T3&lt;:Real where T2&lt;:Real where T1&lt;:Real" href="#RvSpectML.calc_mean_dfluxdlnlambda-Union{Tuple{URT}, Tuple{T3}, Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,2},AbstractArray{T1,2},AbstractArray{T3,1},AbstractArray{URT,1}}} where URT&lt;:AbstractUnitRange where T3&lt;:Real where T2&lt;:Real where T1&lt;:Real"><code>RvSpectML.calc_mean_dfluxdlnlambda</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Return mean numerical derivative of fluxes based on a common set of wavelengths.    Inputs: flux &amp; var (2d) and λ (1d)</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/calc_rv/project_flux.jl#LL66-L69">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_mean_spectrum-Union{Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,2},AbstractArray{T2,2}}} where T2&lt;:Real where T1&lt;:Real" href="#RvSpectML.calc_mean_spectrum-Union{Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1,2},AbstractArray{T2,2}}} where T2&lt;:Real where T1&lt;:Real"><code>RvSpectML.calc_mean_spectrum</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Return mean flux (averaging over observations at different times, variance weighted) based on a common set of wavelengths.    Inputs: flux &amp; var (2d: pixel, time)</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/calc_rv/project_flux.jl#LL7-L10">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.calc_normalization-Union{Tuple{ACL}, Tuple{ACL}} where ACL&lt;:AbstractChunkList" href="#RvSpectML.calc_normalization-Union{Tuple{ACL}, Tuple{ACL}} where ACL&lt;:AbstractChunkList"><code>RvSpectML.calc_normalization</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Calc normalization of spectra based on average flux in a ChunkList. </p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/util/spectra.jl#LL59">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.code_to_include_param_jl" href="#RvSpectML.code_to_include_param_jl"><code>RvSpectML.code_to_include_param_jl</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>code<em>toread</em>param<em>jl( path</em>to_search )</p><p>Returns a Code object.  After <code>res = code_toread_param_jl( path_to_search )</code>, execute <code>eval(res)</code> to actually include the param.jl file. This is useful since it allows variables to be placed into caller&#39;s namespace.</p><p>Warning:  Malicious users could insert arbitrary code into param.jl.  Don&#39;t be a malicous user.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/util/files.jl#LL70-L78">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.find_overlapping_chunks-Tuple{DataFrames.DataFrame}" href="#RvSpectML.find_overlapping_chunks-Tuple{DataFrames.DataFrame}"><code>RvSpectML.find_overlapping_chunks</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Return indices of any chunks in df that have overlapping lambda<em>hi[i] and lambda</em>lo[i+1].  </p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/masks.jl#LL69">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.get_λ_range-Union{Tuple{ACLT}, Tuple{ACLT}, Tuple{CLT}} where ACLT&lt;:(AbstractArray{CLT,N} where N) where CLT&lt;:AbstractSpectra" href="#RvSpectML.get_λ_range-Union{Tuple{ACLT}, Tuple{ACLT}, Tuple{CLT}} where ACLT&lt;:(AbstractArray{CLT,N} where N) where CLT&lt;:AbstractSpectra"><code>RvSpectML.get_λ_range</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Return the largest minimum wavelength and smallest maximum wavelength across an array of spectra. Calls get<em>λ</em>range(AbstractSpectra2D) that should be specialized for each instrument. </p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/util/spectra.jl#LL89-L91">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.make_chunk_list-Union{Tuple{AS}, Tuple{AS,DataFrames.DataFrame}} where AS&lt;:AbstractSpectra" href="#RvSpectML.make_chunk_list-Union{Tuple{AS}, Tuple{AS,DataFrames.DataFrame}} where AS&lt;:AbstractSpectra"><code>RvSpectML.make_chunk_list</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Return a ChunkList of best regions of spectrum with lines in line<em>line.     line</em>list is a DataFrame containing :lambda<em>lo and :lambda</em>hi.     Pads edges by Δ.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/util/chunks.jl#LL93-L97">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.make_clean_line_list_from_tellurics_expres-Union{Tuple{DT}, Tuple{ST}, Tuple{IT}, Tuple{A3}, Tuple{T3}, Tuple{A2}, Tuple{T2}, Tuple{A1}, Tuple{T1}, Tuple{DataFrames.DataFrame,DT}} where DT&lt;:AbstractArray{ST,1} where ST&lt;:Spectra2DBasic{T1,T2,T3,A1,A2,A3,IT} where IT&lt;:Union{EXPRES1D, EXPRES2D} where A3&lt;:(AbstractArray{T3,N} where N) where T3&lt;:Real where A2&lt;:(AbstractArray{T2,N} where N) where T2&lt;:Real where A1&lt;:(AbstractArray{T1,N} where N) where T1&lt;:Real" href="#RvSpectML.make_clean_line_list_from_tellurics_expres-Union{Tuple{DT}, Tuple{ST}, Tuple{IT}, Tuple{A3}, Tuple{T3}, Tuple{A2}, Tuple{T2}, Tuple{A1}, Tuple{T1}, Tuple{DataFrames.DataFrame,DT}} where DT&lt;:AbstractArray{ST,1} where ST&lt;:Spectra2DBasic{T1,T2,T3,A1,A2,A3,IT} where IT&lt;:Union{EXPRES1D, EXPRES2D} where A3&lt;:(AbstractArray{T3,N} where N) where T3&lt;:Real where A2&lt;:(AbstractArray{T2,N} where N) where T2&lt;:Real where A1&lt;:(AbstractArray{T1,N} where N) where T1&lt;:Real"><code>RvSpectML.make_clean_line_list_from_tellurics_expres</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>make<em>clean</em>line<em>list</em>from<em>tellurics</em>expres(line<em>list, expres</em>data; Δv<em>to</em>avoid_tellurics ) Returns a new line list that excludes lines with telluric contamination. Inputs:</p><ul><li>line_list:  Dataframe containing field lambda</li><li>expres_data:  Array of EXPRES spectra</li><li>Δv<em>to</em>avoid_tellurics:  in m/s</li></ul><p>Outputs:</p><ul><li>line<em>list</em>without<em>tellurics:   DataFrame with fields, lambda, weight, lambda</em>lo, and lambda_hi.</li></ul><p>Warning: Assumes a tellurics value in metadata for each spectra, such as is provided by EXPRES.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/tellurics.jl#LL25-L35">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.make_grid_for_chunk-Union{Tuple{ACLT}, Tuple{ACLT,Integer}} where ACLT&lt;:AbstractChunkListTimeseries" href="#RvSpectML.make_grid_for_chunk-Union{Tuple{ACLT}, Tuple{ACLT,Integer}} where ACLT&lt;:AbstractChunkListTimeseries"><code>RvSpectML.make_grid_for_chunk</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>make<em>grid</em>for_chunk Create a range with equal spacing between points with end points set based on union of all chunks in timeseries.</p><p><strong>Arguments:</strong></p><ul><li>timeseries: ChunkListTimeseries</li><li>chunk index:</li><li>oversample_factor: (1)</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/util/chunks.jl#LL49-L56">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.make_manifest-Tuple{String,Module}" href="#RvSpectML.make_manifest-Tuple{String,Module}"><code>RvSpectML.make_manifest</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>make<em>manifest(target</em>subdir::String, Inst::Module; [opts] ) Returns a dataframe containing a list of files to be read and some metadata (e.g., observation times)</p><p><strong>Optional arguements</strong></p><ul><li>max<em>spectra</em>to<em>use (default</em>max<em>spectra</em>to_use)</li><li>paths<em>to</em>search (default<em>paths</em>to_search)</li><li>verbose = true</li></ul><p>Warning:  Malicious users could insert arbitrary code into data_paths.jl.  Don&#39;t be a malicous user.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/util/files.jl#LL10-L20">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.make_orders_into_chunks" href="#RvSpectML.make_orders_into_chunks"><code>RvSpectML.make_orders_into_chunks</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>make<em>orders</em>into_chunks</p><p>Return a ChunkList with a region of spectrum from each order in orders<em>to</em>use.</p><p><strong>Arguments</strong></p><ul><li>spectra&lt;:AbstractSpectra</li><li>inst:  Instrument trait that provides default values</li></ul><p><strong>Optional arguments</strong></p><ul><li>orders<em>to</em>use: Range or Array (orders<em>to</em>use(inst))</li><li>pixels<em>to</em>use: Array of Ranges (each from min<em>col to max</em>col)</li></ul><p>or</p><ul><li>min<em>col: (min</em>col_default(inst,order)) and</li><li>max<em>col: (max</em>col_default(inst,order))</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/util/chunks.jl#LL11-L24">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.make_spectral_time_series_common_wavelengths_with_selected_times-Union{Tuple{T1}, Tuple{STSCWT}, Tuple{STSCWT,AbstractArray{T1,1}}} where T1&lt;:Integer where STSCWT&lt;:AbstractSpectralTimeSeriesCommonWavelengths" href="#RvSpectML.make_spectral_time_series_common_wavelengths_with_selected_times-Union{Tuple{T1}, Tuple{STSCWT}, Tuple{STSCWT,AbstractArray{T1,1}}} where T1&lt;:Integer where STSCWT&lt;:AbstractSpectralTimeSeriesCommonWavelengths"><code>RvSpectML.make_spectral_time_series_common_wavelengths_with_selected_times</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>make<em>spectral</em>time<em>series</em>common<em>wavelengths</em>with<em>selected</em>times( input, time<em>idx ) Returns a SpectralTimeSeriesCommonWavelengths, retaining only those times and spectra specified by time</em>idx.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/types/spectra.jl#LL107-L110">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.make_template_spectra-Union{Tuple{ACLT}, Tuple{ACLT}} where ACLT&lt;:AbstractChunkListTimeseries" href="#RvSpectML.make_template_spectra-Union{Tuple{ACLT}, Tuple{ACLT}} where ACLT&lt;:AbstractChunkListTimeseries"><code>RvSpectML.make_template_spectra</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>make<em>template</em>spectra( chunk<em>list</em>timeseries, [ options ] ) Combine portions of spectra in a ChunkListTimeseries into a template stored as a SpectralTimeSeriesCommonWavelengths. Optionally remove radial velocities before combining spectra based on the :rv_est field in metadata.</p><p><strong>Inputs:</strong></p><ul><li>chunk<em>list</em>timeseries</li></ul><p><strong>Optional Parametes:</strong></p><ul><li>remove<em>rv</em>est (true)</li><li>oversample_factor (1)</li><li>smooth_factor (1)</li><li>alg (:TemporalGP)</li></ul><p><strong>Outputs</strong></p><ul><li>matrix:  timeseries interpolated to each wavelength in the form of a SpectralTimeSeriesCommonWavelengths</li><li>f_mean:  mean flux</li><li>var_mean: variance of mean flux (WARNING: Not computed accurately yet)</li><li>deriv:  dflux/dlnλ averaged over spectra</li><li>deriv2: d²flux/dlnλ² averaged over spectra</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/combine_obs.jl#LL9-L26">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.merge_chunks-Tuple{DataFrames.DataFrame}" href="#RvSpectML.merge_chunks-Tuple{DataFrames.DataFrame}"><code>RvSpectML.merge_chunks</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Return DataFrame with specifications for each chunk which will contain one or more lines.     Input:  line<em>list a DataFrame with:     -  lambda</em>lo, lambda<em>hi, lambda, depth     Output:  DataFrame with     - lambda</em>lo &amp; lambda<em>hi: boundaries for chunk     - lambda &amp; line</em>depths: arrays with info about each line</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/masks.jl#LL83-L90">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.normalize_spectrum!-Union{Tuple{ST}, Tuple{ST,Real}} where ST&lt;:AbstractSpectra" href="#RvSpectML.normalize_spectrum!-Union{Tuple{ST}, Tuple{ST,Real}} where ST&lt;:AbstractSpectra"><code>RvSpectML.normalize_spectrum!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Normalize spectrum, multiplying fluxes by scale_fac. </p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/util/spectra.jl#LL67">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.num_chunks-Union{Tuple{ACLT}, Tuple{ACLT}} where ACLT&lt;:AbstractChunkListTimeseries" href="#RvSpectML.num_chunks-Union{Tuple{ACLT}, Tuple{ACLT}} where ACLT&lt;:AbstractChunkListTimeseries"><code>RvSpectML.num_chunks</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Number of chunks in first chunk<em>list in chunk</em>list_timeseries. </p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/types/chunks.jl#LL117">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.plot_spectrum_chunks-Union{Tuple{PT}, Tuple{CLT}, Tuple{CLT,Union{Integer, AbstractUnitRange}}} where PT&lt;:RecipesBase.AbstractPlot where CLT&lt;:AbstractChunkListTimeseries" href="#RvSpectML.plot_spectrum_chunks-Union{Tuple{PT}, Tuple{CLT}, Tuple{CLT,Union{Integer, AbstractUnitRange}}} where PT&lt;:RecipesBase.AbstractPlot where CLT&lt;:AbstractChunkListTimeseries"><code>RvSpectML.plot_spectrum_chunks</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>plot<em>spectrum</em>chunks( chunklist, chunks ) Returns a plot based of flux versus wavelength for selected chunks from the spectra in chunklist.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/util/plots/spectra.jl#LL11-L14">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.read_header-Tuple{String}" href="#RvSpectML.read_header-Tuple{String}"><code>RvSpectML.read_header</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Read header from FITS file and return Dict with contents. </p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/io.jl#LL20">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.read_linelist_espresso-Tuple{String}" href="#RvSpectML.read_linelist_espresso-Tuple{String}"><code>RvSpectML.read_linelist_espresso</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">Read line list in ESPRESSO csv format.</code></pre><p>ESPRESSO format: lambda and weight. Warning: ESPRESSO masks don&#39;t provide line depth and sometimes include one entry for a blend of lines.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/linelists.jl#LL10-L14">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.read_linelist_vald-Tuple{String}" href="#RvSpectML.read_linelist_vald-Tuple{String}"><code>RvSpectML.read_linelist_vald</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Read line list in VALD csv format.    VALD format: lambda<em>lo, lambdaa</em>hi and depth.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/linelists.jl#LL23-L26">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.read_manifest-Tuple{String}" href="#RvSpectML.read_manifest-Tuple{String}"><code>RvSpectML.read_manifest</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Read manifest containing filename, bjd, target, and optionally additional metadata from CSV file. </p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/io.jl#LL10">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.read_mask_espresso-Union{Tuple{String}, Tuple{CCWT}} where CCWT&lt;:RvSpectML.AbstractCalcChunkWidth" href="#RvSpectML.read_mask_espresso-Union{Tuple{String}, Tuple{CCWT}} where CCWT&lt;:RvSpectML.AbstractCalcChunkWidth"><code>RvSpectML.read_mask_espresso</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">Read mask in ESPRESSO csv format.</code></pre><p>ESPRESSO format: lambda and weight. Warning: ESPRESSO masks don&#39;t provide line depth and sometimes include one entry for a blend of lines.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/masks.jl#LL36-L40">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.read_mask_vald-Union{Tuple{String}, Tuple{CCWT}} where CCWT&lt;:RvSpectML.AbstractCalcChunkWidth" href="#RvSpectML.read_mask_vald-Union{Tuple{String}, Tuple{CCWT}} where CCWT&lt;:RvSpectML.AbstractCalcChunkWidth"><code>RvSpectML.read_mask_vald</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Read mask in VALD csv format.    VALD format: lambda<em>lo, lambdaa</em>hi and depth.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/masks.jl#LL52-L55">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.rms_rvs_within_night-Union{Tuple{}, Tuple{T2}, Tuple{T1}} where T2&lt;:Real where T1&lt;:Real" href="#RvSpectML.rms_rvs_within_night-Union{Tuple{}, Tuple{T2}, Tuple{T1}} where T2&lt;:Real where T1&lt;:Real"><code>RvSpectML.rms_rvs_within_night</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>rms<em>rv</em>within_night(times, rvs) Return RMS of RVs taken within the same night</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/combine_obs.jl#LL216-L219">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.λ_air_to_vac-Tuple{Real}" href="#RvSpectML.λ_air_to_vac-Tuple{Real}"><code>RvSpectML.λ_air_to_vac</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Convert air wavelength (in Å) to vacuum wavelength Ref: https://www.astro.uu.se/valdwiki/Air-to-vacuum%20conversion      VALD3 tools use the following solution derived by N. Piskunov</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/linelists.jl#LL49-L53">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.λ_vac_to_air-Tuple{Real}" href="#RvSpectML.λ_vac_to_air-Tuple{Real}"><code>RvSpectML.λ_vac_to_air</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Convert vacuum wavelength (in Å) to air wavelength Ref: Donald Morton (2000, ApJ. Suppl., 130, 403) via      https://www.astro.uu.se/valdwiki/Air-to-vacuum%20conversion</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/linelists.jl#LL38-L42">source</a></section><h2><a class="nav-anchor" id="RV-Related-Algorithms-1" href="#RV-Related-Algorithms-1">RV-Related Algorithms</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.CCF.calc_ccf_chunk-Union{Tuple{AbstractChuckOfSpectrum}, Tuple{PlanT}, Tuple{AbstractChuckOfSpectrum,PlanT}} where PlanT&lt;:RvSpectML.CCF.AbstractCCFPlan" href="#RvSpectML.CCF.calc_ccf_chunk-Union{Tuple{AbstractChuckOfSpectrum}, Tuple{PlanT}, Tuple{AbstractChuckOfSpectrum,PlanT}} where PlanT&lt;:RvSpectML.CCF.AbstractCCFPlan"><code>RvSpectML.CCF.calc_ccf_chunk</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>calc<em>ccf</em>chunk( chunk, ccf_plan ) Convenience function to compute CCF for one chunk of spectrum.</p><p><strong>Inputs:</strong></p><ul><li>chunk</li></ul><p><strong>Optional Arguments:</strong></p><ul><li>ccf_plan (BasicCCFPlan())</li></ul><p><strong>Return:</strong></p><p>CCF for one chunk of spectrum, evaluated using mask_shape and line list from ccf plan</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/ccf/convenience.jl#LL7-L16">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.CCF.calc_ccf_chunklist-Union{Tuple{PlanT}, Tuple{AbstractChunkList,AbstractArray{PlanT,1}}} where PlanT&lt;:RvSpectML.CCF.AbstractCCFPlan" href="#RvSpectML.CCF.calc_ccf_chunklist-Union{Tuple{PlanT}, Tuple{AbstractChunkList,AbstractArray{PlanT,1}}} where PlanT&lt;:RvSpectML.CCF.AbstractCCFPlan"><code>RvSpectML.CCF.calc_ccf_chunklist</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>calc<em>ccf</em>chunklist ( chunklist, ccf_plans ) Convenience function to compute CCF based on a spectrum&#39;s chunklist.</p><p><strong>Inputs:</strong></p><ul><li>chunklist</li><li>vector of ccf plans (one for each chunk)</li></ul><p><strong>Optional Arguments:</strong></p><p><strong>Return:</strong></p><p>CCF summed over all chunks in a spectrum&#39;s chunklist, evaluated using the line list and mask_shape from the ccf plan for each chunk.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/ccf/convenience.jl#LL49-L59">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.CCF.calc_ccf_chunklist_timeseries-Union{Tuple{AbstractChunkListTimeseries}, Tuple{PlanT}, Tuple{AbstractChunkListTimeseries,PlanT}} where PlanT&lt;:RvSpectML.CCF.AbstractCCFPlan" href="#RvSpectML.CCF.calc_ccf_chunklist_timeseries-Union{Tuple{AbstractChunkListTimeseries}, Tuple{PlanT}, Tuple{AbstractChunkListTimeseries,PlanT}} where PlanT&lt;:RvSpectML.CCF.AbstractCCFPlan"><code>RvSpectML.CCF.calc_ccf_chunklist_timeseries</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>calc<em>ccf</em>chunklist<em>timeseries( chunklist</em>timeseries, line_list ) Convenience function to compute CCF for a timeseries of spectra, each with a chunklist. Uses multiple threads if avaliable.</p><p><strong>Inputs:</strong></p><ul><li>chunklist_timeseries</li></ul><p><strong>Optional Arguments:</strong></p><ul><li>ccf_plan (BasicCCFPlan())</li><li>verbose (false)</li></ul><p><strong>Return:</strong></p><p>CCF summed over all chunks in a spectrum&#39;s chunklist, evaluated using the ccf<em>plan. Note that the ccf</em>plan provided is used as a template for creating a custom ccf<em>plan for each chunk that     only includes lines that reliably appear in that order for all spectra in the chunklist</em>timeseries.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/ccf/convenience.jl#LL84-L97">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.CCF.calc_ccf_v_grid-Tuple{RvSpectML.CCF.BasicCCFPlan}" href="#RvSpectML.CCF.calc_ccf_v_grid-Tuple{RvSpectML.CCF.BasicCCFPlan}"><code>RvSpectML.CCF.calc_ccf_v_grid</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>calc<em>ccf</em>v<em>grid( plan ) Return range with 2n+1 points between -v</em>max and v_max where CCF is to be evaluated. Units based on those in plan.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/ccf/plan.jl#LL41-L45">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.CCF.ccf_1D!-Union{Tuple{PlanT}, Tuple{A3}, Tuple{T3}, Tuple{A2}, Tuple{T2}, Tuple{A1}, Tuple{T1}, Tuple{A1,A2,A3}, Tuple{A1,A2,A3,PlanT}} where PlanT&lt;:RvSpectML.CCF.AbstractCCFPlan where A3&lt;:AbstractArray{T3,1} where T3&lt;:Real where A2&lt;:AbstractArray{T2,1} where T2&lt;:Real where A1&lt;:AbstractArray{T1,1} where T1&lt;:Real" href="#RvSpectML.CCF.ccf_1D!-Union{Tuple{PlanT}, Tuple{A3}, Tuple{T3}, Tuple{A2}, Tuple{T2}, Tuple{A1}, Tuple{T1}, Tuple{A1,A2,A3}, Tuple{A1,A2,A3,PlanT}} where PlanT&lt;:RvSpectML.CCF.AbstractCCFPlan where A3&lt;:AbstractArray{T3,1} where T3&lt;:Real where A2&lt;:AbstractArray{T2,1} where T2&lt;:Real where A1&lt;:AbstractArray{T1,1} where T1&lt;:Real"><code>RvSpectML.CCF.ccf_1D!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">ccf_1D!(ccf_out, λs, fluxes; ccf_plan )</code></pre><p>Compute the cross correlation function of a spectrum with a mask.</p><p><strong>Inputs:</strong></p><ul><li>ccf<em>out: 1-d array of size length(calc</em>ccf<em>v</em>grid(plan)) to store output</li><li>λs: 1-d array of wavelengths</li><li>fluxes:  1-d array of fluxes</li></ul><p><strong>Optional Arguments:</strong></p><ul><li>plan:  parameters for computing ccf (BasicCCFPlan()), including mask<em>shape and line</em>list</li><li>plan.line_list:  Each mask entry consists of the left and right end of tophats and a weight.</li><li>plan.mask_shape: shape of mask to use (currently only works with TopHatCCFMask())</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/ccf/calc_ccf.jl#LL11-L23">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.CCF.ccf_1D-Union{Tuple{PlanT}, Tuple{A3}, Tuple{T3}, Tuple{A2}, Tuple{T2}, Tuple{A1}, Tuple{T1}, Tuple{A2,A3}, Tuple{A2,A3,PlanT}} where PlanT&lt;:RvSpectML.CCF.AbstractCCFPlan where A3&lt;:AbstractArray{T3,1} where T3&lt;:Real where A2&lt;:AbstractArray{T2,1} where T2&lt;:Real where A1&lt;:AbstractArray{T1,1} where T1&lt;:Real" href="#RvSpectML.CCF.ccf_1D-Union{Tuple{PlanT}, Tuple{A3}, Tuple{T3}, Tuple{A2}, Tuple{T2}, Tuple{A1}, Tuple{T1}, Tuple{A2,A3}, Tuple{A2,A3,PlanT}} where PlanT&lt;:RvSpectML.CCF.AbstractCCFPlan where A3&lt;:AbstractArray{T3,1} where T3&lt;:Real where A2&lt;:AbstractArray{T2,1} where T2&lt;:Real where A1&lt;:AbstractArray{T1,1} where T1&lt;:Real"><code>RvSpectML.CCF.ccf_1D</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">ccf_1D( λs, fluxes; ccf_plan )</code></pre><p>Compute the cross correlation function of a spectrum with a mask.</p><p><strong>Inputs:</strong></p><ul><li>λs: 1-d array of wavelengths</li><li>fluxes:  1-d array of fluxes</li></ul><p><strong>Optional Arguments:</strong></p><ul><li>ccf_plan:  parameters for computing ccf (BasicCCFPlan())</li></ul><p><strong>Returns:</strong></p><ul><li>1-d array of size length(calc<em>ccf</em>v_grid(plan))</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/ccf/calc_ccf.jl#LL102-L113">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.CCF.ccf_1D_expr!-Union{Tuple{PlanT}, Tuple{A3}, Tuple{T3}, Tuple{A2}, Tuple{T2}, Tuple{A1}, Tuple{T1}, Tuple{A1,A2,A3}, Tuple{A1,A2,A3,PlanT}} where PlanT&lt;:RvSpectML.CCF.AbstractCCFPlan where A3&lt;:AbstractArray{T3,1} where T3&lt;:Real where A2&lt;:AbstractArray{T2,1} where T2&lt;:Real where A1&lt;:AbstractArray{T1,1} where T1&lt;:Real" href="#RvSpectML.CCF.ccf_1D_expr!-Union{Tuple{PlanT}, Tuple{A3}, Tuple{T3}, Tuple{A2}, Tuple{T2}, Tuple{A1}, Tuple{T1}, Tuple{A1,A2,A3}, Tuple{A1,A2,A3,PlanT}} where PlanT&lt;:RvSpectML.CCF.AbstractCCFPlan where A3&lt;:AbstractArray{T3,1} where T3&lt;:Real where A2&lt;:AbstractArray{T2,1} where T2&lt;:Real where A1&lt;:AbstractArray{T1,1} where T1&lt;:Real"><code>RvSpectML.CCF.ccf_1D_expr!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">ccf_1D_expr!(ccf_out, λs, fluxes; ccf_plan )</code></pre><p>Compute the cross correlation function of a spectrum with a mask.     Experimental version that should work with different mask shapes.     Need to understand why difference before merging this in.</p><p><strong>Inputs:</strong></p><ul><li>ccf<em>out: 1-d array of size length(calc</em>ccf<em>v</em>grid(plan)) to store output</li><li>λs: 1-d array of wavelengths</li><li>fluxes:  1-d array of fluxes</li></ul><p><strong>Optional Arguments:</strong></p><ul><li>plan:  parameters for computing ccf (BasicCCFPlan())</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/ccf/calc_ccf.jl#LL56-L68">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.CCF.ccf_1D_expr-Union{Tuple{PlanT}, Tuple{A3}, Tuple{T3}, Tuple{A2}, Tuple{T2}, Tuple{A1}, Tuple{T1}, Tuple{A2,A3}, Tuple{A2,A3,PlanT}} where PlanT&lt;:RvSpectML.CCF.AbstractCCFPlan where A3&lt;:AbstractArray{T3,1} where T3&lt;:Real where A2&lt;:AbstractArray{T2,1} where T2&lt;:Real where A1&lt;:AbstractArray{T1,1} where T1&lt;:Real" href="#RvSpectML.CCF.ccf_1D_expr-Union{Tuple{PlanT}, Tuple{A3}, Tuple{T3}, Tuple{A2}, Tuple{T2}, Tuple{A1}, Tuple{T1}, Tuple{A2,A3}, Tuple{A2,A3,PlanT}} where PlanT&lt;:RvSpectML.CCF.AbstractCCFPlan where A3&lt;:AbstractArray{T3,1} where T3&lt;:Real where A2&lt;:AbstractArray{T2,1} where T2&lt;:Real where A1&lt;:AbstractArray{T1,1} where T1&lt;:Real"><code>RvSpectML.CCF.ccf_1D_expr</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">ccf_1D_expr(ccf_out, λs, fluxes; ccf_plan )</code></pre><p>Compute the cross correlation function of a spectrum with a mask. Experimental version to allow for flexible mask shapes.</p><p><strong>Inputs:</strong></p><ul><li>λs: 1-d array of wavelengths</li><li>fluxes:  1-d array of fluxes</li></ul><p><strong>Optional Arguments:</strong></p><ul><li>ccf_plan:  parameters for computing ccf (BasicCCFPlan())</li></ul><p><strong>Returns:</strong></p><ul><li>1-d array of size length(calc<em>ccf</em>v_grid(plan))</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/ccf/calc_ccf.jl#LL135-L147">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.RVFromCCF.measure_rv_from_ccf-Union{Tuple{A2}, Tuple{T2}, Tuple{A1}, Tuple{T1}, Tuple{A1,A2}} where A2&lt;:AbstractArray{T2,1} where T2&lt;:Real where A1&lt;:AbstractArray{T1,1} where T1&lt;:Real" href="#RvSpectML.RVFromCCF.measure_rv_from_ccf-Union{Tuple{A2}, Tuple{T2}, Tuple{A1}, Tuple{T1}, Tuple{A1,A2}} where A2&lt;:AbstractArray{T2,1} where T2&lt;:Real where A1&lt;:AbstractArray{T1,1} where T1&lt;:Real"><code>RvSpectML.RVFromCCF.measure_rv_from_ccf</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">measure_rv_from_ccf(vels, ccf; fit_type=&quot;gaussian&quot;)</code></pre><p>Fit a gaussian to the CCF to calculate a velocity using the specified method. Valid arguments for fit_type include &quot;gaussian&quot;, &quot;quadratic&quot;, and &quot;centroid&quot;.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/calc_rv/ccf_std.jl#LL61-L67">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.RVFromCCF.measure_rvs_from_ccf-Union{Tuple{A2}, Tuple{T2}, Tuple{A1}, Tuple{T1}, Tuple{A1,A2}} where A2&lt;:AbstractArray{T2,1} where T2&lt;:Real where A1&lt;:AbstractArray{T1,1} where T1&lt;:Real" href="#RvSpectML.RVFromCCF.measure_rvs_from_ccf-Union{Tuple{A2}, Tuple{T2}, Tuple{A1}, Tuple{T1}, Tuple{A1,A2}} where A2&lt;:AbstractArray{T2,1} where T2&lt;:Real where A1&lt;:AbstractArray{T1,1} where T1&lt;:Real"><code>RvSpectML.RVFromCCF.measure_rvs_from_ccf</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">measure_rvs_from_ccf(vels, ccf; fit_type=&quot;gaussian&quot;)</code></pre><p>At each time, compute the cross correlation function and fit to calculate a velocity using the specified method. Valid arguments for fit_type include &quot;gaussian&quot;, &quot;quadratic&quot;, and &quot;centroid&quot;.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/calc_rv/ccf_std.jl#LL96-L102">source</a></section><h2><a class="nav-anchor" id="Interpolation-Algorithms-1" href="#Interpolation-Algorithms-1">Interpolation Algorithms</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.LinearInterpolation.make_interpolator_linear_var-Union{Tuple{Union{AS, AC}}, Tuple{AC}, Tuple{AS}} where AC&lt;:AbstractChuckOfSpectrum where AS&lt;:AbstractSpectra" href="#RvSpectML.LinearInterpolation.make_interpolator_linear_var-Union{Tuple{Union{AS, AC}}, Tuple{AC}, Tuple{AS}} where AC&lt;:AbstractChuckOfSpectrum where AS&lt;:AbstractSpectra"><code>RvSpectML.LinearInterpolation.make_interpolator_linear_var</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Return interpolator for variances in spectra. </p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/interp/linear.jl#LL19">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.SincInterpolation.spectra_interpolate-Union{Tuple{V4}, Tuple{T4}, Tuple{V3}, Tuple{T3}, Tuple{V2}, Tuple{T2}, Tuple{V1}, Tuple{T1}, Tuple{V1,V2,V3}} where V4&lt;:AbstractArray{T4,1} where T4&lt;:Real where V3&lt;:AbstractArray{T3,1} where T3&lt;:Real where V2&lt;:AbstractArray{T2,1} where T2&lt;:Real where V1&lt;:AbstractArray{T1,1} where T1&lt;:Real" href="#RvSpectML.SincInterpolation.spectra_interpolate-Union{Tuple{V4}, Tuple{T4}, Tuple{V3}, Tuple{T3}, Tuple{V2}, Tuple{T2}, Tuple{V1}, Tuple{T1}, Tuple{V1,V2,V3}} where V4&lt;:AbstractArray{T4,1} where T4&lt;:Real where V3&lt;:AbstractArray{T3,1} where T3&lt;:Real where V2&lt;:AbstractArray{T2,1} where T2&lt;:Real where V1&lt;:AbstractArray{T1,1} where T1&lt;:Real"><code>RvSpectML.SincInterpolation.spectra_interpolate</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Original author: Joe Ninan Converted to Julia and optimized by Christian Gilbertson Further adapted/optimized by Eric Ford Additional optimizations possible by preallocating arrasy for minargs, Nminargs, minvalues, FilterValues and OldYCoords.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/alg/interp/sinc.jl#LL67-L72">source</a></section><h2><a class="nav-anchor" id="Instrument-specific-1" href="#Instrument-specific-1">Instrument-specific</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.EXPRES.read_data" href="#RvSpectML.EXPRES.read_data"><code>RvSpectML.EXPRES.read_data</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Read EXPRES data from FITS file, and return in a Spectra2DBasic object.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/expres/io.jl#LL57">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.NEID.make_manifest-Tuple{String}" href="#RvSpectML.NEID.make_manifest-Tuple{String}"><code>RvSpectML.NEID.make_manifest</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Create Dataframe containing filenames and key data for all files neid*.fits in directory</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/neid/io.jl#LL11">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.NEID.read_barycentric_corrections!" href="#RvSpectML.NEID.read_barycentric_corrections!"><code>RvSpectML.NEID.read_barycentric_corrections!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Read CSV of NEID barycentric corrections, interpolate to bjd&#39;s in df and insert into df[:,ssb_rv]. </p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/neid/io.jl#LL106">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.NEID.read_data" href="#RvSpectML.NEID.read_data"><code>RvSpectML.NEID.read_data</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Read NEID (non-solar) data from FITS file, and return in a Spectra2DBasic object.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/neid/io.jl#LL44">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.NEID.read_drift_corrections!" href="#RvSpectML.NEID.read_drift_corrections!"><code>RvSpectML.NEID.read_drift_corrections!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Read CSV of NEID drift corrections, interpolate to bjd&#39;s in df and insert into df[:,drift]. </p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/neid/io.jl#LL96">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.NEID.read_metadata-Tuple{String}" href="#RvSpectML.NEID.read_metadata-Tuple{String}"><code>RvSpectML.NEID.read_metadata</code></a> — <span class="docstring-category">Method</span>.</div><div><div><p>Create Dict containing filename and default metadata from file.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/neid/io.jl#LL30">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RvSpectML.NEID.read_solar_data" href="#RvSpectML.NEID.read_solar_data"><code>RvSpectML.NEID.read_solar_data</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Read NEID Solar data from FITS file, and return in a Spectra2DBasic object.</p></div></div><a class="source-link" target="_blank" href="https://github.com/eford/RvSpectML.jl/blob/bcc2fe09ef94f620b4de0a1642837007da04c1cb/src/instruments/neid/io.jl#LL69">source</a></section><h2><a class="nav-anchor" id="Other-1" href="#Other-1">Other</a></h2><footer><hr/><a class="previous" href="modules.html"><span class="direction">Previous</span><span class="title">Modules</span></a><a class="next" href="types.html"><span class="direction">Next</span><span class="title">Types</span></a></footer></article></body></html>
